<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>일본어 단어 퀴즈 | 日本語クイズ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* 토스 스타일 디자인 시스템 */
    :root {
      --toss-blue: #3182F6;
      --toss-blue-hover: #1B64DA;
      --toss-blue-bg: #E8F3FF;
      --gray-900: #191F28;
      --gray-600: #4E5968;
      --gray-500: #6B7684;
      --gray-400: #8B95A1;
      --gray-100: #F2F4F6;
      --gray-50: #F9FAFB;
      --white: #FFFFFF;
      --correct: #00C48C;
      --correct-bg: #E5FAF5;
      --wrong: #F04452;
      --wrong-bg: #FFEBEE;
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
      --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.06);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Noto Sans KR', 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--gray-50);
      color: var(--gray-900);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2.5rem 1.25rem;
      -webkit-font-smoothing: antialiased;
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--gray-900);
      letter-spacing: -0.03em;
      line-height: 1.3;
    }

    .subtitle {
      font-size: 0.9375rem;
      color: var(--gray-500);
      margin-top: 0.375rem;
      font-weight: 400;
    }

    .screen {
      display: none;
      width: 100%;
      max-width: 400px;
      animation: fadeIn 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .screen.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Start screen - 토스 카드 스타일 */
    .start-card {
      background: var(--white);
      border-radius: 16px;
      padding: 2rem 1.5rem;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-100);
    }

    .start-card p {
      color: var(--gray-600);
      font-size: 0.9375rem;
      line-height: 1.6;
      margin-bottom: 1.75rem;
      letter-spacing: -0.01em;
    }

    .btn {
      display: inline-block;
      width: 100%;
      padding: 1rem 1.5rem;
      font-family: inherit;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      letter-spacing: -0.02em;
    }

    .btn:active {
      transform: scale(0.99);
    }

    .btn-primary {
      background: var(--toss-blue);
      color: var(--white);
    }

    .btn-primary:hover {
      background: var(--toss-blue-hover);
    }

    /* Quiz screen */
    .quiz-card {
      background: var(--white);
      border-radius: 16px;
      padding: 1.75rem 1.5rem;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-100);
    }

    .progress-bar {
      height: 4px;
      background: var(--gray-100);
      border-radius: 2px;
      margin-bottom: 1.5rem;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--toss-blue);
      border-radius: 2px;
      transition: width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .question-number {
      font-size: 0.8125rem;
      color: var(--gray-500);
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .question-word {
      font-size: 2rem;
      font-weight: 700;
      text-align: center;
      margin: 1rem 0 0.25rem;
      color: var(--gray-900);
      line-height: 1.3;
      letter-spacing: -0.02em;
    }

    .question-reading {
      font-size: 0.9375rem;
      color: var(--gray-500);
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .choices {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .choice-btn {
      display: block;
      width: 100%;
      padding: 1rem 1.25rem;
      font-family: inherit;
      font-size: 0.9375rem;
      text-align: left;
      background: var(--gray-50);
      border: 1px solid var(--gray-100);
      border-radius: 12px;
      color: var(--gray-900);
      cursor: pointer;
      transition: background 0.2s, border-color 0.2s;
      font-weight: 500;
      letter-spacing: -0.01em;
    }

    .choice-btn:hover:not(.disabled) {
      background: var(--toss-blue-bg);
      border-color: var(--toss-blue);
      color: var(--toss-blue);
    }

    .choice-btn.correct {
      border-color: var(--correct);
      background: var(--correct-bg);
      color: var(--correct);
    }

    .choice-btn.wrong {
      border-color: var(--wrong);
      background: var(--wrong-bg);
      color: var(--wrong);
    }

    .choice-btn.disabled {
      cursor: default;
    }

    .choice-btn.disabled:not(.correct):not(.wrong) {
      opacity: 0.6;
    }

    /* Result screen */
    .result-card {
      background: var(--white);
      border-radius: 16px;
      padding: 2rem 1.5rem;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-100);
      text-align: center;
    }

    .result-score {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--toss-blue);
      margin: 0.5rem 0;
      letter-spacing: -0.03em;
    }

    .result-message {
      color: var(--gray-600);
      font-size: 0.9375rem;
      margin-bottom: 1.5rem;
      line-height: 1.5;
    }

    .btn-secondary {
      background: var(--gray-100);
      color: var(--gray-900);
    }

    .btn-secondary:hover {
      background: var(--gray-400);
      color: var(--white);
    }

    /* 정보 입력 폼 화면 */
    .form-card {
      background: var(--white);
      border-radius: 16px;
      padding: 1.75rem 1.5rem;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--gray-100);
    }

    .form-card h2 {
      font-size: 1.125rem;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 1.25rem;
      letter-spacing: -0.02em;
    }

    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-group:last-of-type {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      font-size: 0.8125rem;
      font-weight: 600;
      color: var(--gray-700, #4E5968);
      margin-bottom: 0.5rem;
    }

    .form-group input {
      width: 100%;
      padding: 0.875rem 1rem;
      font-family: inherit;
      font-size: 0.9375rem;
      border: 1px solid var(--gray-100);
      border-radius: 12px;
      background: var(--white);
      color: var(--gray-900);
      transition: border-color 0.2s;
    }

    .form-group input::placeholder {
      color: var(--gray-400);
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--toss-blue);
    }

    .form-submitted-msg {
      color: var(--gray-600);
      font-size: 0.9375rem;
      margin-bottom: 1rem;
      line-height: 1.5;
      display: none;
    }

    .form-submitted-msg.show {
      display: block;
    }
  </style>
</head>
<body>
  <header>
    <h1>일본어 단어 퀴즈</h1>
    <p class="subtitle">日本語の単語クイズ</p>
  </header>

  <main>
    <!-- 시작 화면 -->
    <section id="start-screen" class="screen active">
      <div class="start-card">
        <p>일본어 단어의 뜻을 고르는 퀴즈입니다.<br>10문제가 출제됩니다. 도전해 보세요!</p>
        <button type="button" class="btn btn-primary" id="start-btn">퀴즈 시작</button>
      </div>
    </section>

    <!-- 정보 입력 화면 -->
    <section id="form-screen" class="screen">
      <div class="form-card">
        <h2>참가자 정보</h2>
        <form id="info-form">
          <div class="form-group">
            <label for="input-name">이름</label>
            <input type="text" id="input-name" name="name" placeholder="이름을 입력하세요" required>
          </div>
          <div class="form-group">
            <label for="input-phone">전화번호</label>
            <input type="tel" id="input-phone" name="phone" placeholder="010-0000-0000" required>
          </div>
          <div class="form-group">
            <label for="input-email">이메일</label>
            <input type="email" id="input-email" name="email" placeholder="example@email.com" required>
          </div>
          <p class="form-submitted-msg" id="form-submitted-msg">메일 앱이 열렸습니다. 보내기 버튼을 눌러 제출해 주세요.</p>
          <button type="submit" class="btn btn-primary" id="submit-btn">제출하기</button>
        </form>
        <button type="button" class="btn btn-secondary" id="go-quiz-btn" style="margin-top: 0.75rem; display: none;">퀴즈 시작하기</button>
      </div>
    </section>

    <!-- 퀴즈 화면 -->
    <section id="quiz-screen" class="screen">
      <div class="quiz-card">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
        </div>
        <p class="question-number" id="question-number">1 / 10</p>
        <p class="question-word" id="question-word">単語</p>
        <p class="question-reading" id="question-reading">たんご</p>
        <div class="choices" id="choices"></div>
      </div>
    </section>

    <!-- 결과 화면 -->
    <section id="result-screen" class="screen">
      <div class="result-card">
        <p class="subtitle">퀴즈 결과</p>
        <p class="result-score" id="result-score">0 / 10</p>
        <p class="result-message" id="result-message">잘했어요!</p>
        <button type="button" class="btn btn-secondary" id="retry-btn">다시 하기</button>
      </div>
    </section>
  </main>

  <script>
    const VOCAB = [
      { word: '水', reading: 'みず', meaning: '물' },
      { word: '火', reading: 'ひ', meaning: '불' },
      { word: '人', reading: 'ひと', meaning: '사람' },
      { word: '山', reading: 'やま', meaning: '산' },
      { word: '川', reading: 'かわ', meaning: '강' },
      { word: '木', reading: 'き', meaning: '나무' },
      { word: '日', reading: 'ひ', meaning: '해, 날' },
      { word: '月', reading: 'つき', meaning: '달' },
      { word: '車', reading: 'くるま', meaning: '차' },
      { word: '本', reading: 'ほん', meaning: '책' },
      { word: '学校', reading: 'がっこう', meaning: '학교' },
      { word: '先生', reading: 'せんせい', meaning: '선생님' },
      { word: '友達', reading: 'ともだち', meaning: '친구' },
      { word: '家族', reading: 'かぞく', meaning: '가족' },
      { word: '食べる', reading: 'たべる', meaning: '먹다' },
      { word: '飲む', reading: 'のむ', meaning: '마시다' },
      { word: '行く', reading: 'いく', meaning: '가다' },
      { word: '来る', reading: 'くる', meaning: '오다' },
      { word: '見る', reading: 'みる', meaning: '보다' },
      { word: '聞く', reading: 'きく', meaning: '듣다' },
      { word: '読む', reading: 'よむ', meaning: '읽다' },
      { word: '書く', reading: 'かく', meaning: '쓰다' },
      { word: '話す', reading: 'はなす', meaning: '말하다' },
      { word: '大きい', reading: 'おおきい', meaning: '크다' },
      { word: '小さい', reading: 'ちいさい', meaning: '작다' },
      { word: '新しい', reading: 'あたらしい', meaning: '새롭다' },
      { word: '古い', reading: 'ふるい', meaning: '오래되다' },
      { word: '暑い', reading: 'あつい', meaning: '덥다' },
      { word: '寒い', reading: 'さむい', meaning: '춥다' },
      { word: '美味しい', reading: 'おいしい', meaning: '맛있다' },
      { word: '元気', reading: 'げんき', meaning: '건강하다, 원기' },
      { word: '時間', reading: 'じかん', meaning: '시간' },
      { word: '今日', reading: 'きょう', meaning: '오늘' },
      { word: '明日', reading: 'あした', meaning: '내일' },
      { word: '昨日', reading: 'きのう', meaning: '어제' },
    ];

    const TOTAL_QUESTIONS = 10;
    let currentQuiz = [];
    let currentIndex = 0;
    let score = 0;
    let answered = false;

    const MY_EMAIL = 'seung031220@naver.com';

    const startScreen = document.getElementById('start-screen');
    const formScreen = document.getElementById('form-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultScreen = document.getElementById('result-screen');
    const startBtn = document.getElementById('start-btn');
    const infoForm = document.getElementById('info-form');
    const formSubmittedMsg = document.getElementById('form-submitted-msg');
    const goQuizBtn = document.getElementById('go-quiz-btn');
    const progressFill = document.getElementById('progress-fill');
    const questionNumber = document.getElementById('question-number');
    const questionWord = document.getElementById('question-word');
    const questionReading = document.getElementById('question-reading');
    const choicesEl = document.getElementById('choices');
    const resultScore = document.getElementById('result-score');
    const resultMessage = document.getElementById('result-message');
    const retryBtn = document.getElementById('retry-btn');

    function shuffle(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function pickWrongMeanings(correct, count) {
      const others = VOCAB.filter(v => v.meaning !== correct).map(v => v.meaning);
      const unique = [...new Set(others)];
      return shuffle(unique).slice(0, count);
    }

    function startQuiz() {
      currentQuiz = shuffle(VOCAB).slice(0, TOTAL_QUESTIONS);
      currentIndex = 0;
      score = 0;
      startScreen.classList.remove('active');
      quizScreen.classList.add('active');
      showQuestion();
    }

    function showQuestion() {
      answered = false;
      const q = currentQuiz[currentIndex];
      const wrongChoices = pickWrongMeanings(q.meaning, 3);
      const options = shuffle([q.meaning, ...wrongChoices]);

      progressFill.style.width = (currentIndex / TOTAL_QUESTIONS) * 100 + '%';
      questionNumber.textContent = `${currentIndex + 1} / ${TOTAL_QUESTIONS}`;
      questionWord.textContent = q.word;
      questionReading.textContent = q.reading;

      choicesEl.innerHTML = '';
      options.forEach(meaning => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'choice-btn';
        btn.textContent = meaning;
        btn.addEventListener('click', () => selectAnswer(btn, meaning, q.meaning));
        choicesEl.appendChild(btn);
      });
    }

    function selectAnswer(btn, selected, correct) {
      if (answered) return;
      answered = true;

      const buttons = choicesEl.querySelectorAll('.choice-btn');
      buttons.forEach(b => {
        b.classList.add('disabled');
        if (b.textContent === correct) b.classList.add('correct');
        if (b === btn && selected !== correct) b.classList.add('wrong');
      });

      if (selected === correct) score++;

      setTimeout(() => {
        currentIndex++;
        if (currentIndex < TOTAL_QUESTIONS) {
          showQuestion();
        } else {
          showResult();
        }
      }, 800);
    }

    function showResult() {
      progressFill.style.width = '100%';
      quizScreen.classList.remove('active');
      resultScreen.classList.add('active');
      resultScore.textContent = `${score} / ${TOTAL_QUESTIONS}`;
      if (score === TOTAL_QUESTIONS) {
        resultMessage.textContent = '완벽해요! すごい！';
      } else if (score >= TOTAL_QUESTIONS * 0.7) {
        resultMessage.textContent = '잘했어요! よくできました！';
      } else {
        resultMessage.textContent = '다시 도전해 보세요! もう一度挑戦しましょう！';
      }
    }

    function goToStart() {
      resultScreen.classList.remove('active');
      startScreen.classList.add('active');
    }

    function showFormScreen() {
      startScreen.classList.remove('active');
      formScreen.classList.add('active');
      formSubmittedMsg.classList.remove('show');
      goQuizBtn.style.display = 'none';
    }

    infoForm.addEventListener('submit', function (e) {
      e.preventDefault();
      const name = document.getElementById('input-name').value.trim();
      const phone = document.getElementById('input-phone').value.trim();
      const email = document.getElementById('input-email').value.trim();
      const subject = encodeURIComponent('[일본어 퀴즈] 참가자 정보');
      const body = encodeURIComponent(
        '이름: ' + name + '\n전화번호: ' + phone + '\n이메일: ' + email
      );
      const mailtoUrl = 'mailto:' + MY_EMAIL + '?subject=' + subject + '&body=' + body;
      window.location.href = mailtoUrl;
      formSubmittedMsg.classList.add('show');
      goQuizBtn.style.display = 'block';
    });

    goQuizBtn.addEventListener('click', function () {
      formScreen.classList.remove('active');
      startQuiz();
    });

    startBtn.addEventListener('click', showFormScreen);
    retryBtn.addEventListener('click', goToStart);
  </script>
</body>
</html>
